<!DOCTYPE html>
<html>
  <head>
    <title>Define Done - Articles | Adam Shannon</title>
    <link rel="stylesheet" type="text/css" href="../style.css" />
    <meta charset="utf-8" />
    <style>
      canvas {
          border: 1px solid black;
      }
      div.graph {
          text-align: center;
      }
    </style>
  </head>
  <body onload="draw();">

    <nav>
      <div class="right bold black">
        <a href="https://github.com/adamdecaf">Github</a> |
        <a href="https://twitter.com/adamdecaf">Twitter</a> |
        <a href="https://keybase.io/adamdecaf">Keybase</a>
      </div>

      <h1><a href="../">Adam Shannon</a> - <a href="/articles">/articles</a></h1>
    </nav>

    <section>
      <article style="overflow:auto;">
        <h2 style="text-align: center;">title</h2>

        <p>foo</p>

        <div class="graph">
          <canvas id="team-graph" height="225" width="250"></canvas>
        </div>

        <p>foo2</p>

        <div class="graph">
          <canvas id="intro-graph-1" height="225" width="600"></canvas>
        </div>

        <p>bar</p>

        <div class="graph">
          <canvas id="feature-comparison" height="225" width="600"></canvas>
        </div>

      </article>
    </section>

    <script>
      const GRAPH_TOP = 25;
      const GRAPH_BOTTOM = 175;
      const GRAPH_LEFT = 50;
      const GRAPH_RIGHT = 575;

      const BAR_WIDTH = 50;
      const BAR_PADDING = 30;

      function drawBar(ctx, idx, label) {
        ctx.strokeRect((GRAPH_LEFT+BAR_PADDING)*idx, GRAPH_TOP, BAR_WIDTH, GRAPH_BOTTOM-GRAPH_TOP);

        // Draw Label
        ctx.save();
        ctx.translate((GRAPH_LEFT+BAR_PADDING)*idx, GRAPH_BOTTOM+20);
        //ctx.rotate(Math.PI / 5);

        ctx.font = "20px sans-serif";
        ctx.fillStyle = "#000000"; // green
        //ctx.textAlign = "center";
        ctx.fillText(label, 0, 0, BAR_WIDTH);

        ctx.restore();
      }

      function drawGraph(id, labels) {
        const canvas = document.getElementById(id);
        if (canvas.getContext) {
          const ctx = canvas.getContext("2d");

          // Draw Chart Axis
          ctx.beginPath();
          ctx.moveTo(GRAPH_LEFT, GRAPH_TOP);
          ctx.lineTo(GRAPH_LEFT, GRAPH_BOTTOM);
          ctx.stroke();

          ctx.beginPath();
          ctx.moveTo(GRAPH_LEFT, GRAPH_BOTTOM);
          ctx.lineTo(GRAPH_RIGHT, GRAPH_BOTTOM);
          ctx.stroke();

          // Draw Chart Labels
          ctx.font = "14px sans-serif";
          ctx.fillText("100%", 7, 10+GRAPH_TOP);
          ctx.fillText("0%", 25, GRAPH_BOTTOM);

          // Draw Each Bar
          for (idx = 0; idx < labels.length; idx++) {
            drawBar(ctx, idx+1, labels[idx]);
          }

          return ctx
        }
        return null
      }

      function fillBar(ctx, idx, percent, fillStyle) {
        // Draw a rectangle filling the idx'th bar
        ctx.save();
        ctx.fillStyle = fillStyle;

        var newy = GRAPH_TOP+(GRAPH_BOTTOM-GRAPH_TOP)*(1-percent)
        ctx.fillRect((GRAPH_LEFT+BAR_PADDING)*idx, newy, BAR_WIDTH, GRAPH_BOTTOM-newy);
        ctx.restore();
      }

      function fillSection(ctx, idx, percent, height, fillStyle, label) {
        ctx.save();
        ctx.fillStyle = fillStyle;

        var newx = (GRAPH_LEFT+BAR_PADDING)*idx;
        var newy = GRAPH_TOP+(GRAPH_BOTTOM-GRAPH_TOP)*(1-percent)
        ctx.fillRect(newx, newy, BAR_WIDTH, height);

        // Draw the label
        if (label !== undefined) {
          ctx.font = "14px sans-serif";
          ctx.fillStyle = "black";
          ctx.fillText(label, newx+BAR_WIDTH+10, newy+12, BAR_WIDTH*2);
        }

        ctx.restore();
      }

      const Sales = 1;
      const CS = 2;
      const Eng = 3;
      const Prod = 4;
      const Docs = 5;
      const Infra = 6;

      const labels = [" Sales", "  CS", " Eng", "Product", "  Docs", " Infra"];

      function draw() {
        var teamGraph = drawGraph("team-graph", [" Eng"]);
        fillSection(teamGraph, Sales, 0.15, 22, "black", "DB Layer");
        fillSection(teamGraph, Sales, 0.30, 15, "black", "API Endpoints");
        fillSection(teamGraph, Sales, 0.40, 10, "black", "Unit Tests");
        fillSection(teamGraph, Sales, 0.50, 10, "black", "Local Testing");
        fillSection(teamGraph, Sales, 0.61, 11, "black", "Initial Deploy");
        fillSection(teamGraph, Sales, 0.75, 15, "black", "Bugs");
        fillSection(teamGraph, Sales, 0.89, 12, "black", "Improvements");
        fillSection(teamGraph, Sales, 1.00, 5, "black", "Code Coverage");

        var introGraph = drawGraph("intro-graph-1", labels);
        fillBar(introGraph, Sales, 0.65, "black");
        fillBar(introGraph, CS, 0.40, "black");
        fillBar(introGraph, Eng, 0.25, "black");
        fillBar(introGraph, Prod, 1.00, "black");
        fillBar(introGraph, Docs, 0.66, "black");
        fillBar(introGraph, Infra, 0.10, "black");

        var featureComparison = drawGraph("feature-comparison", labels);

        // Feature Black
        fillSection(featureComparison, Sales, 0.20, 10, "black");
        fillSection(featureComparison, CS, 0.25, 9, "black");
        fillSection(featureComparison, Eng, 0.50, 8, "black");
        fillSection(featureComparison, Prod, 0.70, 10, "black");
        fillSection(featureComparison, Docs, 0.20, 7, "black");
        fillSection(featureComparison, Infra, 0.15, 22, "black");

        // Feature Green
        fillSection(featureComparison, Sales, 0.70, 10, "green");
        fillSection(featureComparison, CS, 0.15, 9, "green");
        fillSection(featureComparison, Eng, 0.42, 7, "green");
        fillSection(featureComparison, Prod, 0.50, 10, "green");
        fillSection(featureComparison, Docs, 0.33, 15, "green");
        fillSection(featureComparison, Infra, 0.40, 15, "green");

        // Feature Blue
        fillSection(featureComparison, Sales, 0.10, 3, "blue");
        fillSection(featureComparison, CS, 0.40,  9, "blue");
        fillSection(featureComparison, Eng, 0.81, 15, "blue");
        fillSection(featureComparison, Prod, 0.60, 10, "blue");
        fillSection(featureComparison, Docs, 0.65, 15, "blue");
        fillSection(featureComparison, Infra, 0.25, 8, "blue");

        // Feature Red
        fillSection(featureComparison, Sales, 0.50, 10, "red");
        fillSection(featureComparison, CS, 0.60, 9, "red");
        fillSection(featureComparison, Eng, 0.22, 9, "red");
        fillSection(featureComparison, Prod, 0.80, 10, "red");
        fillSection(featureComparison, Docs, 0.10, 7, "red");
        fillSection(featureComparison, Infra, 0.80, 13, "red");

        // Feature Orange
        fillSection(featureComparison, Sales, 0.40, 10, "orange");
        fillSection(featureComparison, CS, 0.70, 9, "orange");
        fillSection(featureComparison, Eng, 0.09, 8, "orange");
        fillSection(featureComparison, Prod, 0.25, 10, "orange");
        fillSection(featureComparison, Docs, 0.40, 7, "orange");
        fillSection(featureComparison, Infra, 0.65, 15, "orange");

        // Feature Purple
        fillSection(featureComparison, Sales, 0.30, 10, "purple");
        fillSection(featureComparison, CS, 0.30, 9, "purple");
        fillSection(featureComparison, Eng, 0.65, 12, "purple");
        fillSection(featureComparison, Prod, 0.10, 10, "purple");
        fillSection(featureComparison, Docs, 0.50, 7, "purple");
        fillSection(featureComparison, Infra, 0.50, 10, "purple");

        // Feature Gray
        fillSection(featureComparison, Sales, 0.60, 10, "gray");
        fillSection(featureComparison, CS, 0.50, 9, "gray");
        fillSection(featureComparison, Eng, 0.31, 8, "gray");
        fillSection(featureComparison, Prod, 0.50, 20, "gray");
        fillSection(featureComparison, Docs, 0.75, 7, "gray");
        fillSection(featureComparison, Infra, 0.70, 10, "gray");

        // Feature Yellow
        fillSection(featureComparison, Sales, 0.80, 10, "yellow");
        fillSection(featureComparison, CS, 0.80, 9, "yellow");
        fillSection(featureComparison, Eng, 0.91, 7, "yellow");
        fillSection(featureComparison, Prod, 0.35, 10, "yellow");
        fillSection(featureComparison, Docs, 0.90, 7, "yellow");
        fillSection(featureComparison, Infra, 0.90, 10, "yellow");
      }
    </script>
  </body>
</html>
