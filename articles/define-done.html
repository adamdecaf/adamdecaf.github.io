<!DOCTYPE html>
<html>
  <head>
    <title>Define Done - Articles | Adam Shannon</title>
    <link rel="stylesheet" type="text/css" href="../style.css" />
    <meta charset="utf-8" />
    <style>
      canvas {
          border: 1px solid black;
      }
      div.graph {
          text-align: center;
      }
    </style>
  </head>
  <body onload="draw();">

    <nav>
      <div class="right bold black">
        <a href="https://github.com/adamdecaf">Github</a> |
        <a href="https://twitter.com/adamdecaf">Twitter</a> |
        <a href="https://keybase.io/adamdecaf">Keybase</a>
      </div>

      <h1><a href="../">Adam Shannon</a> - <a href="/articles">/articles</a></h1>
    </nav>

    <section>
      <article style="overflow:auto;">
        <h2 style="text-align: center;">title</h2>

        <p>foo</p>

        <div class="graph">
          <canvas id="intro-graph-1" height="225" width="600"></canvas>
        </div>

        <p>bar</p>

        <div class="graph">
          <canvas id="feature-comparison" height="225" width="600"></canvas>
        </div>

      </article>
    </section>

    <script>
      const GRAPH_TOP = 25;
      const GRAPH_BOTTOM = 175;
      const GRAPH_LEFT = 50;
      const GRAPH_RIGHT = 575;

      const BAR_WIDTH = 50;
      const BAR_PADDING = 30;

      function drawBar(ctx, idx, label) {
        ctx.strokeRect((GRAPH_LEFT+BAR_PADDING)*idx, GRAPH_TOP, BAR_WIDTH, GRAPH_BOTTOM-GRAPH_TOP);

        // Draw Label
        ctx.save();
        ctx.translate((GRAPH_LEFT+BAR_PADDING)*idx, GRAPH_BOTTOM+20);
        //ctx.rotate(Math.PI / 5);

        ctx.font = "20px sans-serif";
        ctx.fillStyle = "#000000"; // green
        //ctx.textAlign = "center";
        ctx.fillText(label, 0, 0, BAR_WIDTH);

        ctx.restore();
      }

      function drawGraph(id) {
        const canvas = document.getElementById(id);
        if (canvas.getContext) {
          const ctx = canvas.getContext("2d");

          // Draw Chart Axis
          ctx.beginPath();
          ctx.moveTo(GRAPH_LEFT, GRAPH_TOP);
          ctx.lineTo(GRAPH_LEFT, GRAPH_BOTTOM);
          ctx.stroke();

          ctx.beginPath();
          ctx.moveTo(GRAPH_LEFT, GRAPH_BOTTOM);
          ctx.lineTo(GRAPH_RIGHT, GRAPH_BOTTOM);
          ctx.stroke();

          // Draw Chart Labels
          ctx.font = "14px sans-serif";
          ctx.fillText("100%", 7, 10+GRAPH_TOP);
          ctx.fillText("0%", 25, GRAPH_BOTTOM);

          // Draw Each Bar
          drawBar(ctx, 1, " Sales");
          drawBar(ctx, 2, "  CS");
          drawBar(ctx, 3, " Eng");
          drawBar(ctx, 4, "Product");
          drawBar(ctx, 5, "  Docs");
          drawBar(ctx, 6, " Infra");

          return ctx
        }
        return null
      }

      function fillBar(ctx, idx, percent, fillStyle) {
        // Draw a rectangle filling the idx'th bar
        ctx.save();
        ctx.fillStyle = fillStyle;

        var newy = GRAPH_TOP+(GRAPH_BOTTOM-GRAPH_TOP)*(1-percent)
        ctx.fillRect((GRAPH_LEFT+BAR_PADDING)*idx, newy, BAR_WIDTH, GRAPH_BOTTOM-newy);
        ctx.restore();
      }

      function fillSection(ctx, idx, percent, height, fillStyle) {
        ctx.save();
        ctx.fillStyle = fillStyle;

        var newy = GRAPH_TOP+(GRAPH_BOTTOM-GRAPH_TOP)*(1-percent)
        ctx.fillRect((GRAPH_LEFT+BAR_PADDING)*idx, newy, BAR_WIDTH, height);
        ctx.restore();
      }

      function draw() {
        var introGraph = drawGraph("intro-graph-1");
        fillBar(introGraph, 1, 0.65, "green");
        fillBar(introGraph, 2, 0.40, "yellow");
        fillBar(introGraph, 3, 0.25, "red");
        fillBar(introGraph, 4, 1, "blue");
        fillBar(introGraph, 5, 0.66, "black");
        fillBar(introGraph, 6, 0.99, "gray");

        var featureComparison = drawGraph("feature-comparison");
        fillSection(featureComparison, 1, 0.65, 7, "green");
        fillSection(featureComparison, 2, 0.40, 10, "yellow");
        fillSection(featureComparison, 3, 0.25, 12, "red");
        fillSection(featureComparison, 4, 0.90, 14, "blue");
        fillSection(featureComparison, 5, 0.66, 15, "black");
        fillSection(featureComparison, 6, 0.33, 20, "gray");
      }
    </script>
  </body>
</html>
